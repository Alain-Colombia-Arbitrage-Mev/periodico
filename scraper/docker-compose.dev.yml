# Docker Compose for Development
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

version: '3.8'

services:
  scraper:
    volumes:
      # Mount source code for live development
      - ./src:/app/src:ro
      - ./config:/app/config:ro
    environment:
      # Override for development
      LOG_LEVEL: DEBUG
      SCRAPE_INTERVAL: 300  # 5 minutes for faster testing
      MAX_ARTICLES_PER_CATEGORY: 5
    command: python -u src/main.py
    # Enable debugging
    stdin_open: true
    tty: true

  # Development database viewer
  adminer:
    image: adminer:latest
    container_name: scraper_adminer
    ports:
      - "8080:8080"
    networks:
      - scraper_network
    environment:
      ADMINER_DEFAULT_SERVER: postgres
    depends_on:
      - postgres
